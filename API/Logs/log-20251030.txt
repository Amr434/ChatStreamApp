[2025-10-30 14:40:06 INF] User profile is available. Using 'C:\Users\amr.kasban\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-10-30 14:40:07 INF] Now listening on: https://localhost:7208
[2025-10-30 14:40:07 INF] Now listening on: http://localhost:5203
[2025-10-30 14:40:08 INF] Application started. Press Ctrl+C to shut down.
[2025-10-30 14:40:08 INF] Hosting environment: Development
[2025-10-30 14:40:08 INF] Content root path: D:\DummyLearningProjects\StreamChatApp\API
[2025-10-30 14:40:16 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/index.html - null null
[2025-10-30 14:40:18 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/index.html - 200 null text/html;charset=utf-8 2094.132ms
[2025-10-30 14:40:18 INF] Request starting HTTP/2 GET https://localhost:7208/_vs/browserLink - null null
[2025-10-30 14:40:18 INF] Request starting HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - null null
[2025-10-30 14:40:18 INF] Request finished HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 64.8905ms
[2025-10-30 14:40:18 INF] Request finished HTTP/2 GET https://localhost:7208/_vs/browserLink - 200 null text/javascript; charset=UTF-8 244.6113ms
[2025-10-30 14:40:19 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - null null
[2025-10-30 14:40:19 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 267.8943ms
[2025-10-30 14:50:26 INF] User profile is available. Using 'C:\Users\amr.kasban\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-10-30 14:50:27 INF] Now listening on: https://localhost:7208
[2025-10-30 14:50:27 INF] Now listening on: http://localhost:5203
[2025-10-30 14:50:28 INF] Application started. Press Ctrl+C to shut down.
[2025-10-30 14:50:28 INF] Hosting environment: Development
[2025-10-30 14:50:28 INF] Content root path: D:\DummyLearningProjects\StreamChatApp\API
[2025-10-30 14:50:34 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/index.html - null null
[2025-10-30 14:50:35 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/index.html - 200 null text/html;charset=utf-8 1055.832ms
[2025-10-30 14:50:35 INF] Request starting HTTP/2 GET https://localhost:7208/_vs/browserLink - null null
[2025-10-30 14:50:35 INF] Request starting HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - null null
[2025-10-30 14:50:35 INF] Request finished HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 107.2612ms
[2025-10-30 14:50:35 INF] Request finished HTTP/2 GET https://localhost:7208/_vs/browserLink - 200 null text/javascript; charset=UTF-8 240.1486ms
[2025-10-30 14:50:36 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - null null
[2025-10-30 14:50:36 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.4479ms
[2025-10-30 14:51:04 INF] Request starting HTTP/2 POST https://localhost:7208/api/AuthUser/login - application/json 69
[2025-10-30 14:51:07 INF] Executing endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 14:51:07 INF] Route matched with {action = "Login", controller = "AuthUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.User.LoginDto) on controller API.Controllers.AuthUserController (API).
[2025-10-30 14:51:13 INF] Executing action method API.Controllers.AuthUserController.Login (API) - Validation state: "Valid"
[2025-10-30 14:51:23 INF] Executed DbCommand (381ms) [Parameters=[@__loginDto_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
[2025-10-30 14:51:24 INF] Executed DbCommand (128ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2025-10-30 14:51:25 INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[ExpiresAt], [r].[Token], [r].[UserId], [r].[isRevoked]
FROM [RefreshTokens] AS [r]
WHERE CONVERT(varchar(36), [r].[UserId]) = @__userId_0
[2025-10-30 14:51:25 INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
[2025-10-30 14:51:26 INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ExpiresAt], [r].[Token], [r].[UserId], [r].[isRevoked]
FROM [RefreshTokens] AS [r]
WHERE CONVERT(varchar(36), [r].[UserId]) = @__userId_0 AND [r].[isRevoked] = CAST(0 AS bit) AND [r].[ExpiresAt] < GETUTCDATE()
[2025-10-30 14:51:26 INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [ExpiresAt], [Token], [UserId])
OUTPUT INSERTED.[isRevoked]
VALUES (@p0, @p1, @p2, @p3, @p4);
[2025-10-30 14:51:26 INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE CONVERT(varchar(36), [a].[Id]) = @__userId_0
[2025-10-30 14:51:26 INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
[2025-10-30 14:51:26 INF] Executed DbCommand (9ms) [Parameters=[@p19='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p20='?' (Size = 4000), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DisplayName] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LastSeen] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [ProfileImageUrl] = @p14, [SecurityStamp] = @p15, [Status] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
[2025-10-30 14:51:26 INF] Executed action method API.Controllers.AuthUserController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12688.5908ms.
[2025-10-30 14:51:26 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`2[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-10-30 14:51:26 INF] Executed action API.Controllers.AuthUserController.Login (API) in 18894.8517ms
[2025-10-30 14:51:26 INF] Executed endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 14:51:26 INF] Request finished HTTP/2 POST https://localhost:7208/api/AuthUser/login - 200 null application/json; charset=utf-8 22742.74ms
[2025-10-30 15:42:02 INF] Request starting HTTP/2 POST https://localhost:7208/api/AuthUser/login - application/json 69
[2025-10-30 15:42:02 INF] Executing endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:42:02 INF] Route matched with {action = "Login", controller = "AuthUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.User.LoginDto) on controller API.Controllers.AuthUserController (API).
[2025-10-30 15:42:10 INF] Executed action API.Controllers.AuthUserController.Login (API) in 7819.3872ms
[2025-10-30 15:42:10 INF] Executed endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:42:10 ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke a deleted method implementation. This can happen when a method is deleted or its name or signature is changed while the application is running.
   at API.Controllers.AuthUserController..ctor(IUserService userService)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-10-30 15:42:11 INF] Request finished HTTP/2 POST https://localhost:7208/api/AuthUser/login - 500 null text/plain; charset=utf-8 8445.3879ms
[2025-10-30 15:42:12 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/index.html - null null
[2025-10-30 15:42:12 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/index.html - 200 null text/html;charset=utf-8 763.0894ms
[2025-10-30 15:42:12 INF] Request starting HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - null null
[2025-10-30 15:42:12 INF] Request starting HTTP/2 GET https://localhost:7208/_vs/browserLink - null null
[2025-10-30 15:42:12 INF] Request finished HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 58.4925ms
[2025-10-30 15:42:13 INF] Request finished HTTP/2 GET https://localhost:7208/_vs/browserLink - 200 null text/javascript; charset=UTF-8 635.3418ms
[2025-10-30 15:42:13 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - null null
[2025-10-30 15:42:13 ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "POST api/AuthUser/login" for actions - API.Controllers.AuthUserController.Login (API),API.Controllers.AuthUserController.Login (API). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-10-30 15:42:13 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 172.9123ms
[2025-10-30 15:42:24 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/index.html - null null
[2025-10-30 15:42:24 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/index.html - 200 null text/html;charset=utf-8 184.6215ms
[2025-10-30 15:42:25 INF] Request starting HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - null null
[2025-10-30 15:42:25 INF] Request starting HTTP/2 GET https://localhost:7208/_vs/browserLink - null null
[2025-10-30 15:42:25 INF] Request finished HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 192.0366ms
[2025-10-30 15:42:25 INF] Request finished HTTP/2 GET https://localhost:7208/_vs/browserLink - 200 null text/javascript; charset=UTF-8 565.2519ms
[2025-10-30 15:42:25 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - null null
[2025-10-30 15:42:25 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 124.1631ms
[2025-10-30 15:42:51 INF] Request starting HTTP/2 POST https://localhost:7208/api/AuthUser/login - application/json 69
[2025-10-30 15:42:51 INF] Executing endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:42:51 INF] Executed endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:42:51 ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Multiple constructors accepting all given argument types have been found in type 'API.Controllers.AuthUserController'. There should only be one applicable constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.TryFindMatchingConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.CreateActivator(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.CreateControllerFactory(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-10-30 15:42:51 INF] Request finished HTTP/2 POST https://localhost:7208/api/AuthUser/login - 500 null text/plain; charset=utf-8 135.9316ms
[2025-10-30 15:52:28 INF] User profile is available. Using 'C:\Users\amr.kasban\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-10-30 15:52:29 INF] Now listening on: https://localhost:7208
[2025-10-30 15:52:29 INF] Now listening on: http://localhost:5203
[2025-10-30 15:52:29 INF] Application started. Press Ctrl+C to shut down.
[2025-10-30 15:52:29 INF] Hosting environment: Development
[2025-10-30 15:52:29 INF] Content root path: D:\DummyLearningProjects\StreamChatApp\API
[2025-10-30 15:52:35 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/index.html - null null
[2025-10-30 15:52:36 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/index.html - 200 null text/html;charset=utf-8 1265.7264ms
[2025-10-30 15:52:37 INF] Request starting HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - null null
[2025-10-30 15:52:37 INF] Request starting HTTP/2 GET https://localhost:7208/_vs/browserLink - null null
[2025-10-30 15:52:37 INF] Request finished HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 222.1435ms
[2025-10-30 15:52:38 INF] Request finished HTTP/2 GET https://localhost:7208/_vs/browserLink - 200 null text/javascript; charset=UTF-8 652.4002ms
[2025-10-30 15:52:38 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - null null
[2025-10-30 15:52:38 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.1294ms
[2025-10-30 15:53:05 INF] Request starting HTTP/2 POST https://localhost:7208/api/AuthUser/login - application/json 69
[2025-10-30 15:53:08 INF] Executing endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:53:08 INF] Route matched with {action = "Login", controller = "AuthUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.User.LoginDto) on controller API.Controllers.AuthUserController (API).
[2025-10-30 15:53:16 INF] Executing action method API.Controllers.AuthUserController.Login (API) - Validation state: "Valid"
[2025-10-30 15:53:16 INF] Login attempt started for user: amrkasban@gmail.com
[2025-10-30 15:53:28 INF] Executed DbCommand (562ms) [Parameters=[@__loginDto_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
[2025-10-30 15:53:30 INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2025-10-30 15:53:31 INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[ExpiresAt], [r].[Token], [r].[UserId], [r].[isRevoked]
FROM [RefreshTokens] AS [r]
WHERE CONVERT(varchar(36), [r].[UserId]) = @__userId_0
[2025-10-30 15:53:32 INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
[2025-10-30 15:53:32 INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ExpiresAt], [r].[Token], [r].[UserId], [r].[isRevoked]
FROM [RefreshTokens] AS [r]
WHERE CONVERT(varchar(36), [r].[UserId]) = @__userId_0 AND [r].[isRevoked] = CAST(0 AS bit) AND [r].[ExpiresAt] < GETUTCDATE()
[2025-10-30 15:53:32 INF] Executed DbCommand (126ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [ExpiresAt], [Token], [UserId])
OUTPUT INSERTED.[isRevoked]
VALUES (@p0, @p1, @p2, @p3, @p4);
[2025-10-30 15:53:33 INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE CONVERT(varchar(36), [a].[Id]) = @__userId_0
[2025-10-30 15:53:33 INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
[2025-10-30 15:53:33 INF] Executed DbCommand (17ms) [Parameters=[@p19='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p20='?' (Size = 4000), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DisplayName] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LastSeen] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [ProfileImageUrl] = @p14, [SecurityStamp] = @p15, [Status] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
[2025-10-30 15:53:33 INF] User amrkasban@gmail.com logged in successfully.
[2025-10-30 15:53:33 INF] Executed action method API.Controllers.AuthUserController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16544.9502ms.
[2025-10-30 15:53:33 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`2[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-10-30 15:53:33 INF] Executed action API.Controllers.AuthUserController.Login (API) in 24755.3064ms
[2025-10-30 15:53:33 INF] Executed endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:53:33 INF] Request finished HTTP/2 POST https://localhost:7208/api/AuthUser/login - 200 null application/json; charset=utf-8 28515.7216ms
[2025-10-30 15:55:36 INF] Request starting HTTP/2 POST https://localhost:7208/api/AuthUser/login - application/json 70
[2025-10-30 15:55:36 INF] Executing endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:55:36 INF] Route matched with {action = "Login", controller = "AuthUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.User.LoginDto) on controller API.Controllers.AuthUserController (API).
[2025-10-30 15:55:36 INF] Executing action method API.Controllers.AuthUserController.Login (API) - Validation state: "Valid"
[2025-10-30 15:55:36 INF] Login attempt started for user: amrkasban@gmail.com
[2025-10-30 15:55:36 INF] Executed DbCommand (24ms) [Parameters=[@__loginDto_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[LastSeen], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfileImageUrl], [a].[SecurityStamp], [a].[Status], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
[2025-10-30 15:55:37 WRN] Login failed for user: amrkasban@gmail.com. Reason: Invalid email or password.
[2025-10-30 15:55:37 INF] Executed action method API.Controllers.AuthUserController.Login (API), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 302.0992ms.
[2025-10-30 15:55:37 INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-10-30 15:55:37 INF] Executed action API.Controllers.AuthUserController.Login (API) in 617.7744ms
[2025-10-30 15:55:37 INF] Executed endpoint 'API.Controllers.AuthUserController.Login (API)'
[2025-10-30 15:55:37 INF] Request finished HTTP/2 POST https://localhost:7208/api/AuthUser/login - 401 null application/json; charset=utf-8 665.4665ms
[2025-10-30 16:35:28 INF] User profile is available. Using 'C:\Users\amr.kasban\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-10-30 16:35:29 INF] Now listening on: https://localhost:7208
[2025-10-30 16:35:29 INF] Now listening on: http://localhost:5203
[2025-10-30 16:35:30 INF] Application started. Press Ctrl+C to shut down.
[2025-10-30 16:35:30 INF] Hosting environment: Development
[2025-10-30 16:35:30 INF] Content root path: D:\DummyLearningProjects\StreamChatApp\API
[2025-10-30 16:35:36 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/index.html - null null
[2025-10-30 16:35:38 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/index.html - 200 null text/html;charset=utf-8 1802.796ms
[2025-10-30 16:35:38 INF] Request starting HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - null null
[2025-10-30 16:35:38 INF] Request starting HTTP/2 GET https://localhost:7208/_vs/browserLink - null null
[2025-10-30 16:35:38 INF] Request finished HTTP/2 GET https://localhost:7208/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 58.1472ms
[2025-10-30 16:35:38 INF] Request finished HTTP/2 GET https://localhost:7208/_vs/browserLink - 200 null text/javascript; charset=UTF-8 228.7612ms
[2025-10-30 16:35:38 INF] Request starting HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - null null
[2025-10-30 16:35:38 INF] Request finished HTTP/2 GET https://localhost:7208/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.0826ms
